<div *ngIf="displayScore" id = outerGrid
     [class.list-detail]="listDetail"
     [class.not-list-detail]="!listDetail">
    <h2 id = styleH2> Результаты теста </h2>

    <div id = blockGrid>

        <div *ngIf="currentMessage || (threshold === null) || (scorePercent >= threshold)" id = block>
            <svg xmlns="http://www.w3.org/2000/svg" *ngIf="!workbook.reviewed"
                    class="card-icon"
                    width="75" height="75" viewBox="0 0 64 64">
                <path fill="none" d="M0 0H64.001V64H0z"></path>
                <path d="M33.666,50.187c-0.459-1.089-0.466-2.291-0.02-3.385c0.427-1.049,1.23-1.87,2.257-2.339 c-0.226-0.29-0.429-0.599-0.579-0.944c-0.471-1.081-0.493-2.282-0.062-3.382c0.665-1.69,2.263-2.74,3.972-2.798 c-0.297-0.944-0.301-1.986,0.098-2.972c0.797-1.967,2.862-3.049,4.876-2.688c-0.206-0.885-0.158-1.837,0.217-2.738 c0.372-0.895,1.006-1.597,1.772-2.074l-4.536-1.861c-0.319,6.672-4.814,12.463-11.405,14.55l-0.603-1.906 c5.971-1.891,9.989-7.227,10.036-13.296l2.521-4.206c0,0,1.015-1.707,1.614-2.715c4.603-7.746,1.827-11.873-1.584-12.436 l-5.718,9.249L20.078,27H6.001v21.001L20.093,48c0,0,3.626,1.497,8.25,3.216c4.902,1.822,8.401,2.512,10.885,2.644l-3.163-1.302 C34.975,52.114,34.124,51.272,33.666,50.187z M50.563,43.728l-10.318-4.235c-0.283-0.11-0.576-0.163-0.864-0.163 c-0.962,0-1.881,0.584-2.256,1.538c-0.236,0.602-0.224,1.26,0.034,1.852c0.258,0.592,0.731,1.048,1.333,1.283 c0.005,0.002,0.01,0.004,0.014,0.006l10.301,4.221c0.59,0.232,1.245,0.22,1.836-0.036c0.592-0.259,1.048-0.733,1.283-1.336 c0.238-0.604,0.227-1.259-0.032-1.851C51.635,44.417,51.163,43.962,50.563,43.728z M44.211,48.512l-5.571-2.286 c-0.29-0.117-0.595-0.177-0.9-0.177c-0.318,0-0.637,0.063-0.939,0.191c-0.596,0.251-1.058,0.719-1.301,1.316 c-0.245,0.6-0.24,1.258,0.011,1.854c0.25,0.594,0.716,1.055,1.312,1.296c0.001,0.001,0.003,0.001,0.004,0.002l5.563,2.289 c0.596,0.241,1.253,0.238,1.85-0.014c0.596-0.251,1.057-0.717,1.299-1.312C46.041,50.433,45.446,49.016,44.211,48.512z M55.924,38.539L44.329,33.78c-0.293-0.117-0.596-0.174-0.896-0.174c-0.956,0-1.866,0.571-2.247,1.511 c-0.499,1.235,0.1,2.648,1.336,3.148c0.001,0,0.003,0.001,0.004,0.002l11.588,4.756c0.593,0.239,1.25,0.234,1.846-0.017 c0.596-0.253,1.057-0.722,1.298-1.321c0.245-0.599,0.24-1.254-0.01-1.847C56.996,39.243,56.525,38.781,55.924,38.539z M59.328,33.186c-0.253-0.616-0.731-1.096-1.346-1.351l-8.448-3.468c-1.272-0.528-2.735,0.072-3.262,1.34 c-0.526,1.266,0.071,2.723,1.332,3.256l8.454,3.469c0.62,0.258,1.297,0.261,1.913,0.008c0.616-0.254,1.097-0.732,1.354-1.348 C59.58,34.478,59.581,33.801,59.328,33.186z"></path>
            </svg>

            <svg xmlns="http://www.w3.org/2000/svg" *ngIf="workbook.reviewed"
                    class="card-icon"
                    width="75" height="75" viewBox="0 0 64 64">
                <path fill="none" d="M0 0H64.001V64H0z"></path>
                <path d="M23.047,51.719c-0.988,0-1.978-0.364-2.75-1.096L6.769,37.813c-1.604-1.519-1.673-4.051-0.154-5.654 c1.518-1.605,4.05-1.674,5.654-0.154l10.702,10.133l28.681-28.685c1.562-1.562,4.095-1.562,5.657,0 c1.563,1.561,1.563,4.094,0.001,5.656L25.876,50.547C25.097,51.327,24.072,51.719,23.047,51.719z"></path>
            </svg>

            <div class="card-md-text" *ngIf="!workbook.reviewed">
                {{currentMessage || 'Подойдите к стойке T-Systems с результатами решения задач'}}
            </div>
            <div class="card-md-text" *ngIf="workbook.reviewed">
                Тест проверен организатором
            </div>
            <div class="card-band bg-purple"></div>
        </div>


        <div id = block>
            <h3 class="card-value" >{{percentFormatter(scorePercent)}}</h3>
            <h3 class="card-description">Результат теста</h3>
            <div class="card-band bg-primary"></div>
        </div>

        <div id = block>
            <h3 class="card-value">{{solveTime}}</h3>
            <h3 class="card-description">Потрачено времени</h3>
            <div class="card-band"></div>
        </div>

        <div id = block>
            <h3 class="card-value">{{totalProblems}}</h3>
            <h3 class="card-description">Количество задач</h3>
            <div class="card-band bg-secondary"></div>
        </div>

    </div>

    <div id = styleButton>
        <button *ngIf="!listDetail" class="btn btn-lg align-items-center btn-outline-primary vertical-align" [routerLink]="['/workbooks', id]">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 64 64">
                <path fill="none" d="M0 0H64.001V64H0z"/>
                <g>
                    <path d="M44.003,11.002c-0.003-0.55-0.453-1-1.003-1l-4.999-0.001c0-3.313-2.685-6-5.998-6.001 c-3.313-0.001-6,2.684-6.001,5.998l-4.999-0.001c-0.55,0-1.001,0.45-1.001,1v6.994l24,0.006L44.003,11.002z M32,12 c-1.105,0-2-0.896-2-2c0-1.105,0.896-2,2-2c1.104,0,2,0.896,2,2C34.001,11.105,33.105,12,32,12z"/>
                    <path d="M51.003,12h-5l-0.002,8.005l-28-0.005l0.002-8h-5c-1.1,0-2,0.9-2,2v46c0,1.1,0.9,2,2,2h38c1.1,0,2-0.9,2-2 V14C53.003,12.9,52.103,12,51.003,12z M33.504,50.99h-3v-2.834h3V50.99z M37.046,37.667l-2.335,2.348 c-0.784,0.782-1.213,1.819-1.213,2.925v1.777h-3v-1.777c0-1.907,0.742-3.699,2.09-5.044l2.335-2.348 c0.784-0.782,1.213-1.819,1.213-2.924s-0.43-2.143-1.21-2.924c-0.782-0.779-1.82-1.21-2.921-1.21 c-1.102,0-2.141,0.431-2.924,1.212c-0.779,0.779-1.209,1.818-1.209,2.922h-3c0-1.904,0.742-3.696,2.089-5.045 c1.352-1.348,3.143-2.089,5.044-2.089c1.901,0,3.692,0.741,5.042,2.087c1.349,1.351,2.09,3.142,2.09,5.047 C39.136,34.531,38.394,36.322,37.046,37.667z"/>
                </g>
            </svg>

            <span class="pl-2">
            Посмотреть решение
            </span>
        </button>

        <button *ngIf="listDetail" class="btn btn-lg align-items-center btn-outline-primary vertical-align"
                (click)="this.viewSolution()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 64 64">
                <path fill="none" d="M0 0H64.001V64H0z"/>
                <g>
                    <path d="M44.003,11.002c-0.003-0.55-0.453-1-1.003-1l-4.999-0.001c0-3.313-2.685-6-5.998-6.001 c-3.313-0.001-6,2.684-6.001,5.998l-4.999-0.001c-0.55,0-1.001,0.45-1.001,1v6.994l24,0.006L44.003,11.002z M32,12 c-1.105,0-2-0.896-2-2c0-1.105,0.896-2,2-2c1.104,0,2,0.896,2,2C34.001,11.105,33.105,12,32,12z"/>
                    <path d="M51.003,12h-5l-0.002,8.005l-28-0.005l0.002-8h-5c-1.1,0-2,0.9-2,2v46c0,1.1,0.9,2,2,2h38c1.1,0,2-0.9,2-2 V14C53.003,12.9,52.103,12,51.003,12z M33.504,50.99h-3v-2.834h3V50.99z M37.046,37.667l-2.335,2.348 c-0.784,0.782-1.213,1.819-1.213,2.925v1.777h-3v-1.777c0-1.907,0.742-3.699,2.09-5.044l2.335-2.348 c0.784-0.782,1.213-1.819,1.213-2.924s-0.43-2.143-1.21-2.924c-0.782-0.779-1.82-1.21-2.921-1.21 c-1.102,0-2.141,0.431-2.924,1.212c-0.779,0.779-1.209,1.818-1.209,2.922h-3c0-1.904,0.742-3.696,2.089-5.045 c1.352-1.348,3.143-2.089,5.044-2.089c1.901,0,3.692,0.741,5.042,2.087c1.349,1.351,2.09,3.142,2.09,5.047 C39.136,34.531,38.394,36.322,37.046,37.667z"/>
                </g>
            </svg>

            <span class="pl-2">
            Посмотреть решение
            </span>
        </button>
    </div>
    
    <div *ngIf="!workbook.reviewed && (scorePercent >= threshold)" style="padding-top: 10px;">
        <div id = workbookQR *ngIf="!workbook.reviewed && (scorePercent >= threshold)">
            <h5> Информация для сотрудника </h5>
            <p>Рабочая тетрадь {{workbook.textcode}}</p>
            <qrcode style="padding-bottom: 0.5rem" [qrdata]="workbook.coworkerLink" [size]="180" [level]="'M'"></qrcode>
        </div>
    </div>
</div> 